
@{
    ViewBag.Title = "Login";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<head>

    <title>Login</title>

</head>

<body>

    <!-- Start: Page Banner -->
    <section class="page-banner services-banner">
        <div class="container">
            <div class="banner-header">
                <h2>LogIn</h2>
                <span class="underline center"></span>
            </div>
        </div>
    </section>
    <!-- End: Page Banner -->
    <!-- Start: Cart Section -->
    <div id="content" class="site-content">
        <div id="primary" class="content-area">
            <main id="main" class="site-main">
                <div class="signin-main">
                    <div class="container">
                        <div class="woocommerce">
                            <div class="woocommerce-login">
                                <div class="company-info signin-register" style="margin-top: -2000px;">
                                    <div class="col-md-5 col-md-offset-1 ">
                                        <div class="row">
                                            <div class="col-md-12">
                                                <div class="company-detail bg-dark margin-left" style="border-radius: 50px;">
                                                    @*<div class="signin-head">
                                                            <h2>Sign Up</h2>
                                                            <span class="underline left"></span>
                                                        </div>*@
                                                    <br />
                                                    <form class="login" method="post">
                                                        <p class="form-row form-row-first input-required">
                                                            <label>
                                                                <span class="first-letter">E-mail</span>
                                                                <span class="second-letter">*</span>
                                                            </label>
                                                            <input type="text" id="email" name="username" class="input-text">
                                                            <span id="validemail1" style="display:none ;font-size: 13px; color:red">Please enter your E-mail</span>
                                                            <span id="validemail3" style="display:none ;font-size: 13px; color:red">E-mail isn’t Exist !!</span>
                                                            <span id="validemail2" style="display:none ;font-size: 13px; color:red">E-mail must end by ( @@yahoo.com / @@gmail.com ) </span>
                                                        </p>
                                                        <p class="form-row form-row-last input-required">
                                                            <label>
                                                                <span class="first-letter">Password</span>
                                                                <span class="second-letter">*</span>
                                                            </label>
                                                            <input type="password" id="password" name="password" class="input-text">
                                                            <span id="validpassword" style="display:none ;font-size: 13px; color:red">Please enter your Password</span>
                                                            <span id="validpassword2" style="display:none ;font-size: 13px; color:red">Password is Wrong , Try again..</span>
                                                        </p>
                                                        <div class="clear"></div>
                                                        <div class="password-form-row">
                                                            <p class="form-row input-checkbox">
                                                                <input type="checkbox" value="forever" id="rememberme" name="rememberme">
                                                                <label class="inline" for="rememberme">Remember me</label>
                                                            </p>
                                                            <p class="lost_password">
                                                                <a href="#">Lost your Password?</a>
                                                            </p>
                                                        </div>
                                                        <input type="button" id="btnlogin" value="Login" name="login" class="button btn btn-default">
                                                        <div class="clear"></div>
                                                        <div id="loading" style="display:none; margin: 0px; padding: 0px; position: fixed; right: 0px; top: 0px; width: 100%; height: 100%; background-color: rgb(102, 102, 102); z-index: 30001; opacity: 0.8;">
                                                            <p style="position: absolute; color: White; top: 50%; left: 47%;">
                                                                
                                                                <img src="~/Resources/images/99.gif" />
                                                                <br /><br />
                                                                
                                                                Please wait..
                                                            </p>
                                                        </div>
                                                    </form>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </main>
        </div>
    </div>
    <!-- End: Cart Section -->
</body>

<script>
    function GoToHome(id) {
        window.location = "/User/Home?UserID="+id
    }
    $(document).ready(function () {
        $('#btnlogin').click(function () {
            var email = $('#email').val();
            var password = $('#password').val();
            //hide span of validation
            $('#validemail1').hide();
            $('#validemail2').hide();
            $('#validpassword').hide();
            $('#validpassword2').hide();
            $('#validemail3').hide();

            if (email == "" || email == undefined) {
                $('#validemail1').show();
            }
            else if (IsEmail(email) == false) {
                $('#validemail2').show();
            }
            else if (password == "" || password == undefined) {
                $('#validpassword').show();
            }
            else {
                $.ajax({
                    url: "/User/EnterAccount?E_mail=" + email +
                        "&Password=" + password,
                    type: "POST",
                    contentType: "application/json;charset=utf-8",
                    dataType: "json",
                    success: function (result) {
                        if (result == "failed") {
                            $('#validemail3').show();
                        }
                        else if (result == "error") {
                            $('#validpassword2').show();
                        }
                        else {
                            $('#loading').show();
                            setTimeout(GoToHome(result), 5000);
                        }
                    }
                });
                return false;
            }
        })
    })
    function IsEmail(email) {
        var regex = /^([a-zA-Z0-9_\.\-\+])+\@@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/;
        if(!regex.test(email)) {
           return false;
        }
        else {
           return true;
        }
      }
</script>





